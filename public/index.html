<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://telegram.org; script-src 'self' 'unsafe-inline' https://telegram.org; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https:; font-src 'self' data:;">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Year Review</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

    <!-- Loading Screen -->
    <div id="loader-view" class="loader-view">
        <div class="spinner"></div>
        <p style="opacity: 0.7; font-size: 14px;">Analyzing your year...</p>
    </div>

    <!-- Stories Container -->
    <div id="story-container">
        
        <!-- Navigation Taps -->
        <div class="tap-zone tap-left" onclick="prevSlide()"></div>
        <div class="tap-zone tap-right" onclick="nextSlide()"></div>

        <!-- Progress Bar -->
        <div class="progress-container" id="progress-container">
            <!-- Injected by JS -->
        </div>

        <!-- SLIDE 1: INTRO -->
        <div class="slide bg-purple active">
            <div id="user-photo-container" style="width: 100px; height: 100px; border-radius: 50%; overflow: hidden; margin-bottom: 20px; border: 4px solid rgba(255,255,255,0.2); display: none;">
                <img id="user-photo" src="" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
            <span class="emoji-icon animate-zoom" id="default-emoji">ğŸ‘‹</span>
            <h1 class="animate-up delay-1">Hello, <span id="user-name">User</span>!</h1>
            <p class="subtitle animate-up delay-2">Your 2024 on Telegram was wild.</p>
            <p class="animate-up delay-3" style="opacity: 0.5; font-size: 12px; margin-top: auto;">Tap right to continue -></p>
        </div>

        <!-- SLIDE 2: TOTAL MESSAGES -->
        <div class="slide bg-blue">
            <span class="emoji-icon animate-zoom">ğŸ’¬</span>
            <p class="subtitle animate-up delay-1">You sent a total of</p>
            <h2 class="animate-up delay-2" id="total-msgs">0</h2>
            <p class="subtitle animate-up delay-3">messages this year.</p>
            <div class="stat-box animate-up delay-3">
                <div class="stat-row"><span>That's about</span> <b id="words-count">0</b> <span>words!</span></div>
            </div>
        </div>

        <!-- SLIDE 3: CONTENT TYPE -->
        <div class="slide bg-orange">
            <span class="emoji-icon animate-zoom">ğŸ“Š</span>
            <h1 class="animate-up delay-1">Communication Style</h1>
            <div class="stat-box animate-up delay-2" style="text-align: left;">
                <div class="stat-row"><span>ğŸ“ Text</span> <b id="stat-text">0</b></div>
                <div class="stat-row"><span>ğŸ“¸ Photos</span> <b id="stat-photo">0</b></div>
                <div class="stat-row"><span>ğŸ™ Voice</span> <b id="stat-voice">0</b></div>
                <div class="stat-row"><span>ğŸ¤¡ Stickers</span> <b id="stat-sticker">0</b></div>
            </div>
            <p class="animate-up delay-3" style="margin-top: 20px;">You are a <b id="persona-type">...</b></p>
        </div>

        <!-- SLIDE 4: TOP FRIENDS -->
        <div class="slide bg-green">
            <span class="emoji-icon animate-zoom">ğŸ†</span>
            <h1 class="animate-up delay-1">Top Chat</h1>
            <div class="stat-box animate-up delay-2">
                <h2 style="font-size: 30px; margin: 10px 0;" id="top-contact-name">...</h2>
                <p style="opacity: 0.7;" id="top-contact-count">0 messages</p>
            </div>
            <p class="subtitle animate-up delay-3">Besties forever?</p>
        </div>

        <!-- SLIDE 5: OUTRO -->
        <div class="slide bg-dark">
            <span class="emoji-icon animate-zoom">âœ¨</span>
            <h1 class="animate-up delay-1">That's a Wrap!</h1>
            <p class="subtitle animate-up delay-2">See you in 2026.</p>
            <button class="animate-up delay-3" style="background: white; color: black; border: none; padding: 15px 30px; border-radius: 30px; font-weight: bold; font-size: 16px; margin-top: 30px;" onclick="Telegram.WebApp.close()">Close App</button>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>
