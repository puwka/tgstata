:root {
    --safe-area-top: env(safe-area-inset-top, 20px);
    --safe-area-bottom: env(safe-area-inset-bottom, 20px);
    --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
}

* { box-sizing: border-box; }

body {
    margin: 0; padding: 0;
    font-family: var(--font-family);
    background: #000; color: #fff;
    overflow: hidden;
    height: 100vh; height: 100dvh;
    touch-action: manipulation;
    user-select: none; -webkit-user-select: none;
}

/* --- SNOW --- */
.snow {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; z-index: 1;
    background-image: radial-gradient(3px 3px at 50px 50px, rgba(255,255,255,0.8), transparent), 
                      radial-gradient(4px 4px at 150px 150px, rgba(255,255,255,0.6), transparent);
    background-size: 200px 200px;
    animation: snow 4s linear infinite;
    opacity: 0.5;
}
@keyframes snow { from { transform: translateY(-200px); } to { transform: translateY(0); } }

/* --- SLIDE LAYOUT (FIXED) --- */
.slide {
    width: 100%; height: 100%;
    position: absolute; top: 0; left: 0;
    display: flex; 
    flex-direction: column;
    /* Main Layout: Space out header, content, and footer */
    justify-content: space-between; 
    align-items: center;
    padding: calc(var(--safe-area-top) + 20px) 24px calc(var(--safe-area-bottom) + 20px);
    opacity: 0; pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 5;
}
.slide.active { opacity: 1; pointer-events: auto; z-index: 10; }

/* Colors */
.bg-blue { background: linear-gradient(180deg, #3390ec 0%, #227ec9 100%); }
.bg-orange { background: linear-gradient(180deg, #e68d37 0%, #d57a2b 100%); }
.bg-green { background: linear-gradient(180deg, #34b744 0%, #2aa03a 100%); }
.bg-purple { background: linear-gradient(180deg, #8e5af7 0%, #7646d8 100%); }
.bg-red { background: linear-gradient(180deg, #ef4949 0%, #d43b3b 100%); }
.bg-yellow { background: linear-gradient(180deg, #fecb2e 0%, #e6b41d 100%); }
.bg-gray { background: linear-gradient(180deg, #8e8e93 0%, #636366 100%); }

/* Content Zones */
.header-zone { text-align: center; flex: 0 0 auto; margin-bottom: 10px; z-index: 2; }
.content-zone { 
    flex: 1 1 auto; /* Grow to fill space */
    display: flex; flex-direction: column; 
    justify-content: center; align-items: center; 
    width: 100%; 
    min-height: 0; /* Allow shrinking */
    z-index: 2;
}
.footer-zone { 
    flex: 0 0 auto; 
    width: 100%; 
    display: flex; flex-direction: column; gap: 10px; 
    z-index: 20; 
}

/* Typography */
.slide-title { font-size: 28px; font-weight: 800; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.subtitle { font-size: 17px; opacity: 0.9; margin-top: 5px; font-weight: 500; }

h2 { 
    font-size: 64px; font-weight: 900; 
    margin: 0; line-height: 1; 
    text-shadow: 0 4px 10px rgba(0,0,0,0.15); 
}
/* Responsive Text */
@media (max-height: 700px) {
    h2 { font-size: 48px; }
    .slide-title { font-size: 24px; }
}

.unit { font-size: 18px; font-weight: 700; opacity: 0.9; text-transform: uppercase; margin-top: 5px; }

/* Stickers */
lottie-player { 
    width: 200px; height: 200px; 
    max-width: 60vw; max-height: 40vh; 
}

/* Buttons */
.btn {
    width: 100%; padding: 16px;
    border-radius: 14px;
    font-size: 17px; font-weight: 700;
    border: none; cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
.btn:active { transform: scale(0.98); }
.btn-primary { background: #fff; color: #000; }
.btn-secondary { background: rgba(0,0,0,0.2); color: #fff; backdrop-filter: blur(10px); }

/* Loader */
.loader-view { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 999; }
